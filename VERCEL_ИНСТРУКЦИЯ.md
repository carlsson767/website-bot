# Что сделать для Vercel

## 1. Залогиньтесь на vercel.com

Зарегистрируйтесь или войдите: [vercel.com](https://vercel.com).

---

## 2. Залейте проект

- **Вариант А:** Подключите GitHub — загрузите сайт в репозиторий, затем в Vercel нажмите **Add New Project** и выберите этот репозиторий.
- **Вариант Б:** Нажмите **Add New → Project**, выберите **Import Git Repository** или загрузите папку через **Vercel CLI** (`vercel` в папке проекта).

Для статического сайта (HTML/CSS/JS) **Build Command** и **Output Directory** можно оставить пустыми или по умолчанию.

Нажмите **Deploy**. Дождитесь окончания деплоя — появится ссылка вида `ваш-проект.vercel.app`.

---

## 3. Добавьте переменные окружения

1. Откройте ваш проект в Vercel.
2. Вверху: **Settings** → слева **Environment Variables**.
3. Добавьте две переменные:

| Name | Value |
|------|--------|
| `TELEGRAM_BOT_TOKEN` | Токен бота от @BotFather (например: `8269224191:AAE1JPzC5TBVNz1iO2B5QPhH16aY-U7SFFE`) |
| `TELEGRAM_CHAT_IDS` | Ваш Chat ID (число, например: `1047261046`). Несколько получателей — через запятую: `1047261046,987654321` |

4. Для каждой переменной выберите окружение **Production** (и при желании Preview).
5. Нажмите **Save**.

---

## 4. Сделайте повторный деплой

Переменные подхватываются только при новом деплое:

1. Вкладка **Deployments**.
2. У последнего деплоя откройте меню (три точки) → **Redeploy**.
3. Подтвердите **Redeploy**.

---

## 5. Проверка

1. Откройте сайт по ссылке Vercel (например `ваш-проект.vercel.app`).
2. Заполните форму заявки и отправьте.
3. В Telegram должно прийти уведомление о новой заявке.

Если уведомление не пришло — откройте консоль браузера (F12 → Console) и посмотрите, есть ли ошибки при запросе к `/api/telegram`.

---

## Если форма всё ещё пишет «Ошибка связи с сервером»

### 1. Проверьте, что API задеплоен

Откройте в браузере (подставьте свой домен):

**https://ваш-проект.vercel.app/api/telegram**

- Если видите JSON с текстом вроде «API работает. Отправьте форму…» — функция на месте, переходите к шагу 2.
- Если видите **404** или страницу «Not Found» — Vercel не видит папку `api`. Тогда проверьте **Root Directory** (см. ниже).

### 2. Root Directory в Vercel

В Vercel у проекта не должно быть «корневой папки», если ваш репозиторий устроен так: в корне лежат `index.html`, папки `js/`, `css/`, `api/`.

1. Vercel → ваш проект → **Settings** → **General**.
2. Поле **Root Directory** должно быть **пустым** (или указывать на ту папку, внутри которой есть и `index.html`, и папка `api/`).
3. Если меняли — сохраните и сделайте **Redeploy**.

### 3. Кэш браузера

Сайт мог загрузить старый `forms.js`, который шлёт заявку на порт 8000.

- Сделайте жёсткое обновление: **Ctrl+Shift+R** (Windows) или **Cmd+Shift+R** (Mac).
- Либо откройте сайт в режиме инкогнито и снова отправьте форму.

### 4. Переменные окружения

Если при отправке формы теперь видите **не** «Ошибка связи с сервером», а текст вроде «TELEGRAM_BOT_TOKEN и TELEGRAM_CHAT_IDS должны быть заданы» — значит, API отвечает, но в Vercel не заданы переменные. Задайте их (шаг 3 выше) и сделайте **Redeploy**.

---

## Итог

- В коде ничего менять не нужно: в `js/telegram.js` уже стоит `notifyEndpoint: '/api/telegram'` и `enabled: true`.
- Токен и Chat ID хранятся только в настройках Vercel (Environment Variables), в репозитории их нет.
- После добавления переменных обязательно сделайте **Redeploy**.
